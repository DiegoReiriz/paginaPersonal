<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->


<!-- POLYMER--->
<link rel="import" href="../../bower_components/polymer/polymer.html">

<!-- Iron elements -->
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">

<!-- Paper elements -->
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/paper-spinner/paper-spinner.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-styles/typography.html">

<!-- Marked element -->
<link rel="import" href="../../bower_components/marked-element/marked-element.html">

<!-- FireBase element -->
<link rel="import" href="../../bower_components/firebase-element/firebase-collection.html">



<dom-module id="my-projects">

  <template>
    <style include = "shared-styiles">
      :host {
        display: block;
      }

      paper-card{
        margin-bottom: 16px;
      }

      paper-card.project { @apply(--layout-horizontal); }
      .image {
        width: 50px;


        background: url('../../images/GitHub-Mark-120px-plus.png');
        background-size: 75% auto;;
        background-repeat: no-repeat;
        background-position: center;
        background-color: #E0E0E0;

        border-right: 1px solid #e8e8e8;

      }
      .content {
        @apply(--layout-flex);
        float: left;
      }
      .header { @apply(--paper-font-headline); }
      .name { color: var(--paper-grey-600); margin: 10px 0; }
      paper-icon-button.rate-icon {
        --iron-icon-fill-color: white;
        --iron-icon-stroke-color: var(--paper-grey-600);
      }

      a { color: var(--google-blue-500); }

      #spinContainer{
        text-align: center;
      }
      #spin{
        margin: auto;
      }

    </style>

    <div id="spinContainer">
      <paper-spinner id="spin" active></paper-spinner>
    </div>

    <firebase-collection
      location="[[src]]"
      data="{{response}}"
      on-firebase-value="_firebaseLoaded"></firebase-collection>

     <template is="dom-repeat" items="[[response]]">
       <paper-card class="project">
        <div class="image"></div>
         <div class="content">
           <div class="card-content">
             <div class="header"><strong>Nombre:</strong> [[item.name]]</div>
             <!-- <div class="name"><strong>Tipo:</strong> [[item.type]]</div> -->
             <div>
              <p><strong>Descripci√≥n:</strong></p>
              <marked-element markdown="[[item.description]]">
                <div class="markdown-html"></div>
              </marked-element>
            </div>
           </div>
           <div class="card-actions">
             <a href="[[item.src]]" alt="link al proyecto" target="_blank"><paper-button noink>Link al proyecto</paper-button></a>
           </div>
         </div>
       </paper-card>
     </template>
  </template>

  <script>
    Polymer({
      is: 'my-projects',

      properties: {
        src: {
          type: String,
          value: 'https://dazzling-fire-3775.firebaseio.com/projects'
        }
      },
      _firebaseLoaded: function() {
        this.$.spin.active=false;
        this.$.spinContainer.style.display='none';
      }
    });

  </script>
</dom-module>
